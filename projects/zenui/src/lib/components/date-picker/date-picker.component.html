<div class="datepicker-container" #datepickerContainer>
  <!-- Custom Input Wrapper -->
  <div class="custom-datepicker-wrapper">
    <div class="custom-datepicker-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        viewBox="0 0 20 20"
      >
        <path
          d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
        />
      </svg>
    </div>
    <input
      type="text"
      class="custom-datepicker-input"
      [value]="selectedDate || ''"
      (click)="toggleDatepicker()"
      [placeholder]="placeholder"
      readonly
    />
  </div>

  <!-- Datepicker Popup -->
  <div class="datepicker" *ngIf="showDatepicker" [ngClass]="position">
    <!-- Header for Month Navigation -->
    <div class="datepicker-header">
      <button (click)="prevMonth()">
        <svg xmlns="http://www.w3.org/2000/svg" width="10" viewBox="0 0 320 512">
          <path
            d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"
          />
        </svg>
      </button>
      <span class="date-picker-header-label">{{ monthYear }}</span>
      <button (click)="nextMonth()">
        <svg xmlns="http://www.w3.org/2000/svg" width="10" viewBox="0 0 320 512">
          <path
            d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"
          />
        </svg>
      </button>
    </div>

    <!-- Calendar Table -->
    <div class="datepicker-body">
      <table class="calendar-table">
        <thead>
          <tr>
            <th *ngFor="let day of ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']">
              {{ day }}
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let week of weeks">
            <td
              [tabindex]="day ? 0 : -1"
              (keydown)="selectDate(day, $event)"
              *ngFor="let day of week"
              [class.empty]="!day"
              [class.today]="isToday(day)"
              (click)="selectDate(day)"
            >
              {{ day || "" }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
